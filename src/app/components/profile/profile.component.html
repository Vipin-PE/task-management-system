<div class="profile-container">
    <h2>Profile</h2>

    <!-- Display user's email, username, and masked password -->
    <div *ngIf="!isEditing">
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Username:</strong> {{ user.username }}</p>
        <p><strong>Password:</strong> ••••••••••</p>
        <button (click)="enableForm()">Edit</button>
    </div>
    <form *ngIf="isEditing" [formGroup]="editForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <mat-form-field appearance="fill">
                <mat-label>Email</mat-label>
                <input matInput formControlName="email" required />
            </mat-form-field>
        </div>

        <div class="form-group">
            <mat-form-field appearance="fill">
                <mat-label>Username</mat-label>
                <input matInput formControlName="username" required />
            </mat-form-field>
        </div>

        <div class="form-group">
            <mat-form-field appearance="fill">
                <mat-label>Current Password</mat-label>
                <input matInput formControlName="currentPassword" type="password" required />
            </mat-form-field>
        </div>

        <div class="form-group">
            <mat-form-field appearance="fill">
                <mat-label>New Password</mat-label>
                <input matInput formControlName="newPassword" type="password" />
            </mat-form-field>
        </div>

        <div class="form-group">
            <mat-form-field appearance="fill">
                <mat-label>Confirm New Password</mat-label>
                <input matInput formControlName="confirmNewPassword" type="password" />
            </mat-form-field>
        </div>

        <button type="submit">Save</button>
        <button type="button" (click)="disableForm()">Cancel</button>

        <div *ngIf="errorMessage" class="error">
            {{ errorMessage }}
        </div>
    </form>
</div>
